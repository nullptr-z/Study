# 四类报文头

通用头、请求头、响应头、载荷/实体头

## 通用头

- Connection: `keep-alive`保持住 TCP 通道。`close`交换一次数据就关闭连接，再次发请求要重新经历三次握手；
- Cache-control: 控制缓存行为
  ![通用报文头](通用头.png)

## 请求头

- Accept: 申明接受响应的媒体类型；`/`任意类型；`text\html`文本。额外参数 `q=`表示权重，优先接受什么类型
- Accept-Encoding: 申明支持的压缩类型；`gzip,default`
- Accept-Language: 申明支持支持的语言，如果服务器无法提供这种语言的响应，返回的默认英文；
- Accept-Charset: 告诉服务器使用何种字符集
- Content-Type: 发送的 payload 数据类型
- User-agent: 告诉服务器本地使用的浏览器和操作系统信息，类型和版本号
- Referer：指定从哪个页面来访问当前请求的页面

![请求头](请求头.png)

## 响应头

- Content-Length：指定实体主体的大小
- Content-Encoding：实体编码
- Content-Language 响应内容的语言
- Content-Length：被发送对象的字节数
- Content-Type：标明对实体体对象的类型；如：html、binary、base64
- Date：指定响应的发送日期和时间
- Server：指定服务器的名称和版本号；标明允许服务的务器系统类型；类似请求报文中的 User-agent
- Connection: close 通知客户本次报文发送完后将关闭链接
- Date: 发送`报文`的日期时间（国标）
- Last-Modified: 标明对象创建或最后一次修改时间

![响应头](响应头.png)

## 实体头

当在讨论报文的时候，常被称作`对象`

> GET 请求时是空的
> POST 请求时，实体包含的内容为表单字段/值
> ![实体头](实体头.png)

## Method

- PUT,DELETE 方法没有验证机制，不考虑再使用了
- HEAD 不会响应 payload，只响应报文头，一般用于连通性测试，探测工具
- CONNECT 创建双向通信的隧道；很不常用

PUT 方法，它允许客户上传对象到，Web 服务器上并指定路径
DELETE 方法，它允许客户删除对象到，Web 服务器上并指定路径
HEAD 方法，类似 GET，服务做出响应，但是不返回请求对象，通常用于调试

## 状态码

- 1XX 很少使用
- 2XX 表示请求成功被接受
- 3XX 表示重定向，客户端需要进一步操作才能完成请求
- 4XX 客户端的请求，服务器不能处理、无法理解。身份认证、权限问题、资源找不到; 通常是客户端给了错误、不匹配的信息
- 5XX 服务器方内部错误，在处理请求过程中出现了错误；网关或代理错误

200：请求成功，响应内容
301：请求对象被转移了，新的 URL 在响应报文 Location 中，客户端自动获取新的 URL
400：服务器无法识别的请求
404：错误 URL，服务器不存在的 URL
505：服务器不支持的 HTTP 协议版本
502 Bad Gateway：服务器作为网关或代理
503 Service Unavailable：服务器目前无法使用（因为它超载或停机维护）。通常，这只是一个暂时的状态。

使用标准的状态码，具有通用性，利于爬虫和搜索引擎(双刃剑)。

## 无状态协议

Cookie、session 将 HTTP 从无状态变成了有状态，意思就是服务器通过 Cookie 信息，知道了客户端是谁

## Cookie

通过过期时间让 Cookie 失效，容量 4KB

1. 用户和服务器首次通信时，由服务器创建的一个 ID，作为用户身份标识 ID 颁发给客户端
2. 客户端发起请时，会携带 ID 和其他 数据一起发送给服务器

Cookie 有很多应用场景，常被用于记录你的姓名、电话、信用卡号、邮件地址等，它所以他不是安全，不应该用于存储敏感信息

> 购物网站可以向你推荐你想买的物品
> 搜索记录
> 方便浏览器自动填充表单信息

存储用户的站点访问信息，这些信息对`任何站点都是公开`的。例如你在访问京东可以读取你在淘宝留下的信息

## Session

关闭浏览器或超时就会失效，主要数据存储在服务器，容量大

1. 同样用户和服务器首次通信时，由服务器创建的一个 ID，作为用户身份标识 ID 颁发给客户端
2. 服务器收到 ID， 就能在服务存储里库找到这个客户端对应的信息
