## 引擎

三种引擎: innoDB 聚簇索引/myisam 非聚簇索引/memory
聚簇索引: 索引和数据放在一个文件

mysql 默认底层数据结构为 B+Tree, 现在主流的 innoDB 引擎只支持 B+Tree。

有些引擎还支持 Hashmap

## 预读

innodb 每次读取 16KB 数据

## 索引存在哪里

存在磁盘里，查询数据的时候会优先加载索引到内存中

## 为什么使用 B+树

B+树数据是存在叶子节点，叶子节点之间是相互连接的(双向链表)，可以线性的访问；mysql B+ Degree 被设置为 3 层

Hash: hash 桶过大，对内存要求高
BST: 有退化成链表风险
平衡树: 插入效率可能很低，需要保持平衡
红黑树: 输的深度越来越深，查询效率变低
B 数: 子节点存储数据有点浪费空间，如果查找的不是需要的数据，也被加载到了内存中

以上这些数据结构不可取原因在于，数据库通常是数据量非常庞大的，数据类型复杂，无法预测到底用哪种更合适
每种数据结构都用自己擅长的领域，但是都需要大都需要基于存放的数据类型提前确定使用哪种
B+适应面对未知复杂的数据适应能力最强

## 索引优化

取决于 B+树特性，key 占用字节越少越好，越少就能存储更多索引。也就是说选用占字节最少得字段做索引最优

- 使用 int 还是 varchar，取决于谁更小

[参考](https://www.bilibili.com/video/BV1eq4y167Mv?p=32&spm_id_from=pageDriver&vd_source=29954a52608497ee1a304ca105f8cb17)
