## 镜像

裁剪版本的 Linux 系统

## 容器

类似虚拟机，用来运行 run 镜像的

## tar 文件

可以将镜像打包 save 成 tar 文件

load 加载 tar 为镜像

## Dockerfile

一些配置，可以通过配置来生成出来一个定制的镜像

## 仓库

Ubuntu 、mysql、Redis 等各种镜像的仓库，可以直接 pull 下来使用

push 上传自己的镜像

## 容器层

镜像的每一层都是只读的。当容器启动时，Docker 在只读的镜像层上方添加一个可写层。
容器内的所有改动（文件修改、新文件等）都会在这个可写层中进行。
容器停止或删除后，对容器所做的修改不会影响到镜像本身。容器层的变化可以通过提交（commit）操作保存到新的镜像层中，从而创建新的镜像。

## 镜像层

每当你在 Dockerfile 中执行一个指令（如 RUN, COPY, ADD 等）时，Docker 都会创建一个新的层。具体来说：

FROM 指令：标记基础镜像的层，是构建过程的起点。
RUN 指令：执行命令并创建新层，比如安装软件包。
COPY 和 ADD 指令：将本地文件复制到镜像，每次复制操作都会创建一个新的层。
CMD 和 ENTRYPOINT 指令：为镜像指定默认的执行命令，不会创建新的层，但会在镜像的元数据中记录。
ENV 指令：设置环境变量，每个环境变量的设置也会创建一个新的层。
EXPOSE 指令：声明镜像内应用将使用的端口，不创建新层，只在元数据中记录。
VOLUME 指令：创建挂载点，不创建新层，只在元数据中记录。

## 分段上传的工作原理

Docker 镜像由多个层（Layer）组成，每层代表镜像构建过程中的一个步骤。当你构建一个新的镜像时，Docker 会利用其分层架构，仅创建自上次构建以来发生变化的层。

1. 层的复用：当你推送一个镜像到仓库时，Docker 首先检查这些层是否已经存在于仓库中。对于那些已经存在的层，Docker 不会重新上传，因为它们在仓库中已经有了相同的内容。这种复用机制极大地节省了上传时间和带宽。
2. 只上传差异：仅需上传自上次推送以来新增或改变的层。这意味着如果你的镜像只有少数几层发生了变化，那么推送过程只会涉及这些变化的层，而不是整个镜像，从而加快了上传速度。
