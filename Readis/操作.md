## 事务

事务是一堆命令的集合，会被放到一个队列中
队列中的某个命令执行失败，不会影响到其他命令，不会导致事务退出

```sh
multi       开启事务
exec        完成事务
```

## 持久化

```sh
save        保存数据到磁盘
bgsave      创建子进程来保存快照，可以环节保存快照的阻塞问题
```

##### RDB: Redis Database:

每隔一段时间将数据快照存入磁盘
redis.conf 中 save 字段可以设置触发保存间隔时间和次数
`xxd dump.rdb` 查看快照文件，

缺点：在快照过后一段时间的数据，会因为宕机丢西，通常 RDB 更适合用作备份
通过 crontab 设置固定时间来执行`save`

创建快照的过程是阻塞，无法继续处理任务

##### AOF: Append Only File

在执行命令写操作的时候，不仅将数据写到内存，还会写到 AOF 文件中，redis.conf 中`appendonly yes`开启

当 Redis 重启的时候就会读取 AOF 来重建整个内存

# crontab

crontab 是用于在 Unix 和类 Unix 操作系统上运行周期性任务的命令。

```sh
crontab [ m h dom mon dow ] command
# m（分钟）： 0 到 59 之间的数字。
# h（小时）： 0 到 23 之间的数字。
# dom（月中的天）： 1 到 31 之间的数字。
# mon（月份）： 1 到 12 之间的数字。
# dow（星期几）： 0 到 7 之间的数字（0 和 7 都表示星期日）。
# command： 要执行的命令或脚本文件。
```
