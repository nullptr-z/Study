# 进程：

### init 进程

- 所有进程的父进程，所有都是由他 frok()或者后代 frok()所创建；它自己由内核在引导时创建
- 系统关闭时终止

### 守护进程

- 系统引导时启动，系统关闭时终止
- 例如 syslogd,httpd 进程

### 资源限制

- 每个进程都会消耗诸如打开文件，内存，CPU 占用时间等资源。系统调用 setlimit()用于，进程为自己设置各类资源设定一个上限
- fork()创建的进程会继承父进程对资源的限制的设置，软限制范围为 0~硬限制上限；硬限制只能向下调，不能调高
- ulimit 可以调整 shell 的资源限制

### 内存映射

系统调用 mmap()，在虚拟地址空姐创建一个新的内存映射

- 文件映射：将文件的部分区域映射到进程的虚拟内存
- 这些映射的内存是可以共享的，方法：
  1. 多个进程都对 同一文件进行映射
  2. frok()的子进程会继承父进程的映射
     某一进程对映射内容的改动，可设为私有或共享，共享时才会对文件造成真实改动

内存映射的作用：

- 进程间通信
- 文件 I/O
- 内存分配
- 初始化文本段

### 静态库与共享库

库：将一组函数(通常是逻辑相关的)编译后的一个文件；

- 静态库:对以编译目标模块的一种结构化整合
  1. 连接器抽取被引用的模块，被复制到可以执行文件中
  2. 不同的可以执行文件存在相同的代码副本，如果同时执行这些文件，在内存中也会有多分相同代码，造成浪费
  3. 如果静态库修改了，所有可以执行文件都要重新编译
- 共享库:程序运行时由·动态连接器·加入内存该库代码，实行运行时链接
  1. 内存中和磁盘中都只有一份库代码
  2. 共享库代码修改，引用该库的程序不需要重新编译

### 进程间通信

各种方式和主要用途

- 信号：用来表示事件的发生
- 管道 Pipe 和 FIFO，用于在进程传递数据
- 套接字：基于网络的通信方式，用于同一个主机或不同主机之间的通信
- 共享内存：多个进程共享的一块内存
- 消息列队：用于在进程交换消息（数据包）
- 文件锁定：防止其他进程读取或者更新文件内存，允许指定的进程对文件部分区域加以锁定

_ls -l | grep 1 | cat -n 这里创建了 3 个进程使用管道通信的_
_FIFO 源于 system V,套接字源于 BSD_
通过读写磁盘文件中信息；慢且不够灵活

### 信号

_虽然可以用于通信，但是这并不是他广泛的用法_
通常被称为：**软终中断**

- 内核可向进程发送信号
  1. 用户键入中断字符 Ctrl+C
  2. 进程的某子进程执行终止
  3. 由进程设定的定时器已到期
  4. 进程尝试访问无效的内存地址
- shell 中 kill 命令发送对进程发送的信号

### 线程

- 共享同一虚拟内存，数据区域和堆
- 每个线程都有自己的栈
- 每个线程都会执行相同的代码
- 线程之间可以通过共享的全局变量进行通信

### 会话、控制终端和控制进程

使用会话最多的是支持任务控制的 shell，由 shell 创建的所有**进程组**与 shell 自身隶属于同一会话，shell 是此会话的**会话首进程**

- 所有进程都有相同的会话标识符

会话：指一组进程组
会话首进程：指创建会话的进程，进程 ID 就是会话 ID

### 伪终端

伪终端是一对相互连接的虚拟设备，也成为主从设备。在这对设备之间，有一条 IPC 信道，可供数据进行双向传递;例如以下伪终端（面向终端的软件）：

- shh
- telnet
- X Window 中的 terminal

### 日期和时间

- 真实时间：指进程自启动时刻运行到现在的时间
- 进程时间：指进程自启动以来所占用 CPU 时间总量，执行时间所花费的时间
  time 命令显示信息
- 真实时间
- 系统 CPU 时间
- 执行管道中的多个进程而花费的用户 CPU 时间

### 客户端/服务器架构

2.17 32 页

### 实时性

指那些对输入做出及时响应的程序。这类输入通常来自外接的传感器之类的设备
需要实时性的设备例如：ATM 机、飞机导航系统等

- 在事件触发后的一定时限内，保证响应的交付
- 需要短时间内响应，就需要系统低层支持
  传统的 unix 和 linux 都不是实时性系统，但他们都有实时性的变体版本

### /proc 文件系统

一种虚拟文件系统，以文件系统目录和文件形式，提供一个指向内核数据结构的结构，提供了便利的查询和更改系统属性的渠道

- 该目录的下目录都是进程的 PID 命名的
- 特权级进程可以读写这些目录下的文件内容
