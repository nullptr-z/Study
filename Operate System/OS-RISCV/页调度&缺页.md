## 为什么会缺页？

一些原因导致页面还没有加载到内存中，或者说被换到了硬盘中，当一个软件需要用到某些数据还被加载时就会发生，这时候触发缺页中断，操作系统会把缺少的部分加载进来

## 为什么要把页放在硬盘里？

1. 内存空间是有限的。而且每个进程都认为自己拥有所有内存空间，但是这是不可能的
2. 有些大型软件，在启动时如果一次性把整个程序加载到内存中，这是不效率，所以先加载一部分必要的部分到内存，等需要其他的时候再加载；这个过程对于软件本身或者说程序员来说是不可见的，也不需要关心，由操作系统自动完成

## 页面置换机制

在[页表](./页表.png)PTE 里面实际上一个标志位`Accessed`, 操作系统可以用它来统计，一个页的使用频率，内存空间不足可以时将低频的放到硬盘里去；

每次调度 PTE 被使用的时候 CPU 会将 Accessed 置位，操作系统内核每隔一段时间把页表 PTE 中所有 Accessed 清 0，统计是由 1 转到 0 的，这样内核就可以知道这段时间里哪些被使用过，以此统计每个 PTE 的使用频率
