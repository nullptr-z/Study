## 为什么使用锁

希望利用多核 CPU 并行带来更好的性能
用来控制多线下控制读写共享，访问一致性；避免竞争条件（race condition）

## 什么时候使用锁

如果两个及以上进程访问了一个共享的数据结构，并且其中一个进程会更新共享的数据结构，那么就需要对于这个共享的数据结构加锁。

## 锁带有哪些问题

锁本身会带来性能开销，使临界区的代码变成串行，限制了多核

多锁的也让情况变得复杂，死锁

## really world 避免直接使用锁

使用锁进行编程具有挑战性。通常最好是将锁隐藏在更高级别的构造中，比如同步队列
