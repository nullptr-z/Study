## 线程可以认为是一种在有多个任务时简化编程的抽象。如何理解这一点？

## 如何实现线程间切换？

## 切换线程时需要维护哪些状态信息？

## 是否可以让线程自己维护状态，主动让出 CPU？

## 切换线程有哪些开销？

需要保存以下环境，包含不是所有，一些重要的寄存器

- 程序计数器（PC）
- 当前执行上下文用到的寄存器；flags、通用寄存器
- 程序的 Stack。通常来说每个线程都有属于自己的 Stack，Stack 记录了函数调用的记录，并反映了当前线程的执行点。

## 多线程并行的策略？

假设有 4 个等待运行线程，要如何实现并发

1. 找一个 ≥4 核心的 CPU，每个 CPU 分别运行一个线程
2. 任意个核心数的 CPU，每隔一段时间运行一个线程一段时间

如果 CPU 算计相当，方案 1 效率不出意外会更高，并且是并行的；
但是成本过高，如果现在有 10000 个线程任务，显然方案 2 更靠谱；
方案 2 更通用但是也带来一些问题，因为切换上下文是有开销的

Really world: 首先采用方案 1，尽可能的使用空闲 CPU，当空闲不足时，再均衡的分配任务到多个 CPU 上

## 一些其他多任务并发技术，科普阅读即可！

多任务的方法中，线程技术并不是非常有效的方法，但是线程通常是最方便，对程序员最友好的

event-driven programming 或者 state machine，这些是在一台计算机上不使用线程但又能运行多个任务的技术。
